@page "/cambiar-password"
@using System.ComponentModel.DataAnnotations
@using Models

<h3>Cambiar mi contraseña</h3>

<EditForm Model="_model" OnValidSubmit="HandlePasswordChange" FormName="formCambiarPassword">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="form-group">
        <label for="newPassword">Nueva contraseña</label>
        <InputText id="newPassword" type="password" class="form-control" @bind-Value="_model.NewPassword" />
        <ValidationMessage For="@(() => _model.NewPassword)" />
    </div>

    <div class="form-group mt-3">
        <button type="submit" class="btn btn-success">Guardar nueva contraseña</button>
    </div>
</EditForm>

@code {
    
    private PasswordModel _model = new();

    private void HandlePasswordChange()
    {
        // Aquí iría la lógica para guardar la nueva contraseña
        Console.WriteLine("Contraseña válida: " + _model.NewPassword);
    }

    public class PasswordModel
    {
        [Required(ErrorMessage = "La contraseña es obligatoria")]
        [RegularExpression(@"^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$",
            ErrorMessage = "Debe tener al menos 8 caracteres, una mayúscula, una minúscula, un número y un símbolo.")]
        public string NewPassword { get; set; }
    }
}

